<script lang="js">
class Card 
{
    color = "";
    value = "";
    power = "";

    constructor(color, value, power) 
    {
        this.color = color;
        this.value = value;
        this.power = power;
    }

    display()
    {
        console.log(this.value + " of " + this.color + " (" + this.power + ")");
    }
}

class Deck {

    cards = [];

    constructor() 
    {   
        const colors = ["heart", "diamond", "club", "spade"];
        const values = ["2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King", "As"];
        for (let i = 0; i < colors.length; i++)
        {
            for (let j = 0; j < values.length; j++)
            {
                this.cards.push(new Card(colors[i], values[j], j));
            }
        }
    }

    display()
    {
        this.cards.forEach(card => 
        {
            card.display();
        });
    }

    shuffle()
    {
        let newCards = [];
        while (this.cards.length != 0)
        {
            newCards.splice(Math.floor(Math.random() * newCards.length), 0, this.cards[this.cards.length - 1]);
            this.cards.pop();
        }
        this.cards = newCards;
    }

    draw(nbCard = 1)
    {
        let cardDrawn = [];
        for (let i = 0; i < nbCard; i++)
        {
            cardDrawn.push(this.cards.pop());
        }
        return cardDrawn;
    }
} 

class Player
{
    name = "";
    hand = [];

    constructor(name)
    {
        this.name = name;
    }

    draw(deck, nbCard = 1)
    {
        this.hand = this.hand.concat(deck.draw(nbCard));
    }

    display()
    {
        console.log(this.name);
        for (let i = 0; i < this.hand.length; i++)
        {
            this.hand[i].display();
        }
    }
}

class CardGame
{
    players = [];
    deck;

    constructor(players)
    {
        this.players = players;
        this.deck = new Deck();
        this.deck.shuffle();
    }

    distribute(nbCard)
    {
        for (let i = 0; i < this.players.length; i++)
        {
            this.players[i].draw(this.deck, nbCard);
        }
    }

    displayStatus()
    {
        for (let i = 0; i < this.players.length; i++)
        {
            if (this.players[i] instanceof Player) 
            {    
                this.players[i].display();
            }
        }
    }
}


    let poker = new CardGame([new Player("Thomas"), new Player("Julie"), new Player("Manon"), new Player("Fred")]);
    poker.distribute(3);
    poker.displayStatus();
</script>